var t=Object.defineProperty,e=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(e,a,o)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[a]=o,l=(t,e)=>{for(var a in e||(e={}))n.call(e,a)&&r(t,a,e[a]);if(o)for(var a of o(e))s.call(e,a)&&r(t,a,e[a]);return t},i=(t,o)=>e(t,a(o));import{d as u,a as c,r as p,o as d,g as m,i as h,w as f,F as b,k as y,c as w,s as g,m as v,j as k,q as F,t as I,h as q,p as _,R as j,n as x,l as C}from"./vendor.40bf91cc.js";import{k as S,_ as L}from"./index.cf2753b4.js";const N={class:"batchList"};var O=L(u(i(l({},{name:"batchList"}),{props:{height:{type:String,default:"600px"},batchList:{type:Array},queryInfo:{type:Object}},setup:function(t){const e=t;let{proxy:a}=F(),o=c({});function n(t){var n;let s=[];return s=[{name:"done"===(null==(n=e.queryInfo)?void 0:n.status)?"查看":"N"===t.isSign?"签收":"办理",handler(t){a.handle(t,"btn")}},{name:"补正",handler(t){a.handle(t,"btn")},show:!("1"===t.isCorrection)},{name:"撤回",handler(t){a.sendBack(t)},type:"warning",show:!("Y"==t.isBack&&"end"!==t.batchFormStatus&&"cancel"!==t.batchFormStatus&&"done"===t.status)},{name:"退回",handler(t){o.sendBack(t,"back")},type:"warning",show:!("wait"===t.status&&"N"===t.isSign)}],s.filter((t=>!t.show))}return(o,s)=>{const r=p("el-button"),l=p("el-table-column"),i=p("el-table");return d(),m("div",N,[h(i,{"tooltip-effect":"dark",data:t.batchList,onRowDblclick:s[0]||(s[0]=t=>k(a).$emit("dblclick")),height:e.height},{default:f((()=>[h(l,{label:"操作",width:"200",key:1},{default:f((({row:t})=>[(d(!0),m(b,null,y(n(t),(e=>(d(),w(r,{key:e.name,size:"mini",type:e.type||"primary",onClick:a=>e.handler(t)},{default:f((()=>[g(v(e.name),1)])),_:2},1032,["type","onClick"])))),128))])),_:1}),h(l,{label:"序号",prop:"index",width:"60",key:2}),h(l,{label:"审签单标题",prop:"title","show-overflow-tooltip":"",key:3}),h(l,{label:"呈报部门",prop:"hostingdepartment",width:"180","show-overflow-tooltip":"",key:4}),h(l,{label:"呈报人",prop:"operator",width:"180","show-overflow-tooltip":"",key:5}),h(l,{label:"呈报时间","show-overflow-tooltip":"",width:"220"},{default:f((({row:t})=>[g(v(k(a).$momentMini(t.updateTime).format("YYYY-MM-DD HH:mm:ss")),1)])),_:1}),h(l,{label:"后续办理人",prop:"nextUserName",width:"200","show-overflow-tooltip":"",key:6},{default:f((({row:t})=>[g(v("end"===t.batchFormStatus?"已结束":"cancel"===t.batchFormStatus?"已报废":t.nextUserName),1)])),_:1}),h(l,{label:"签批时间","show-overflow-tooltip":"",width:"220",key:7},{default:f((({row:t})=>[g(v(k(a).$momentMini(t.createTime).format("YYYY-MM-DD HH:mm:ss")),1)])),_:1})])),_:1},8,["data","height"])])}}})),[["__scopeId","data-v-b92ba0ca"]]);const Y={class:"Clue"},z={class:"header_"},B=["onClick"],D={class:"content"},M={class:"btn"},T=g("新建呈批");var E=L(u(i(l({},{name:"Clue"}),{setup:function(t){let e=c({queryInfo:{status:"wait",flag:"nowYear",pageNum:1,pageSize:10,status:"wait",search:"",priority:"",batchformCategory:"",year:""},batchList:[],batchVisible:!1,total:0,groupRadio:"bf_04",addVisible:!1,menus:[{name:"待办审批",status:"wait",num:0,icon:"el-icon-jw-order-incomplete"},{name:"已办审批",status:"done",num:0,icon:"el-icon-jw-icon_xuncharenwuyiban"}]});async function a(){e.queryInfo.title=e.queryInfo.search,e.queryInfo.start=(e.queryInfo.pageNum-1)*e.queryInfo.pageSize;const t=await(o=e.queryInfo,S({url:"/submitBatchForm/queryLeader.do",method:"post",data:o}));var o;t.success&&(e.batchList=t.data.list,e.batchList.forEach(((t,a)=>{t.index=a+(e.queryInfo.pageNum-1)*e.queryInfo.pageSize+1})),0===t.data.list.length&&1!==e.queryInfo.pageNum&&(e.queryInfo.pageNum--,a()),"wait"===e.queryInfo.status?e.total=t.data.waitTotal:e.total=t.data.doneTotal,e.queryInfo.search||(e.menus[0].num=t.data.waitTotal,e.menus[1].num=t.data.doneTotal))}a();let{menus:o,queryInfo:n,addVisible:s,batchList:r,total:l}=I(e);return(t,i)=>{const u=p("el-button"),c=p("el-pagination");return d(),m("div",Y,[q("div",z,[(d(!0),m(b,null,y(k(o),(t=>(d(),m("div",{class:"menu",style:x({backgroundColor:t.status===k(n).status?"#FFBF00":"#409EFF"})},[q("div",{class:"content",onClick:o=>{return n=t.status,e.queryInfo.status=n,void a();var n}},[q("i",{class:C("fontFamily "+t.icon),style:x({color:t.status===k(n).status?"#FFBF00":"#409EFF"})},null,6),q("span",null,v(t.name),1),q("b",{style:x({color:t.status===k(n).status?"#FFBF00":"#409EFF"})},v(t.num),5)],8,B)],4)))),256))]),q("div",D,[q("div",M,[h(u,{type:"primary",plain:"",onClick:i[0]||(i[0]=t=>_(s)?s.value=!0:s=!0)},{default:f((()=>[T])),_:1})]),h(k(O),{batchList:k(r),queryInfo:k(n)},null,8,["batchList","queryInfo"]),j(" 分页 "),h(c,{background:"",layout:"prev, pager, next, jumper",onCurrentChange:i[1]||(i[1]=t=>a()),total:k(l),"current-page":k(n).pageNum,"onUpdate:current-page":i[2]||(i[2]=t=>k(n).pageNum=t),"page-size":k(n).pageSize,style:{position:"fixed",bottom:"40px",right:"20px"}},null,8,["total","current-page","page-size"])])])}}})),[["__scopeId","data-v-e63acf76"]]);export{E as default};
