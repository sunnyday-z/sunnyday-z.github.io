var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,l=(s,a,o)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[a]=o;import{d as n,a as i,b as u,P as d,Q as c,f as p,u as m,r as f,o as g,g as v,h as b,R as y,i as h,w,j as _,S as O,v as j,x,s as P,D as R,q as V}from"./vendor.40bf91cc.js";import{_ as S}from"./index.4ab7ab82.js";const k=e=>(j("data-v-2529d779"),e=e(),x(),e),L={class:"Login"},M=k((()=>b("div",{class:"top"},[b("div",{class:"logo"},[y(' <div class="img">\n          <img src="../../assets/login/dh.png" />\n          <img src="../../assets/login/gh.png" />\n        </div> '),b("h1",{class:"dept"},"XX查询审批系统")])],-1))),Q={class:"content"},q={class:"login_form"},I=k((()=>b("div",{class:"title"},[b("h3",null,[b("b",null,"平台登录"),b("span",null,"LOGIN")])],-1))),N=P(" 登录 ");const C=n((D=((e,s)=>{for(var a in s||(s={}))r.call(s,a)&&l(e,a,s[a]);if(o)for(var a of o(s))t.call(s,a)&&l(e,a,s[a]);return e})({},{name:"Login"}),s(D,a({setup:function(e){let{proxy:s}=V(),a=i({username:"xiaoming",password:"123456"}),o=i({otherQuery:{},redirect:void 0});u((()=>{document.cookie="name=oeschger; SameSite=none; Secure=true; domain=10.211.55.2",setTimeout((()=>{}),1)}));const r=d();c(r,(e=>{const s=e.query;s&&(o.redirect=s.redirect,o.otherQuery=(e=>Object.keys(e).reduce(((s,a)=>("redirect"!==a&&(s[a]=e[a]),s)),{}))(s))}),{immediate:!0});let t=p(!1),l=p("");const n=m();let j=()=>{s.$refs.loginFormRef.validate((e=>{if(!e)return!1;x()}))},x=()=>{t.value=!0,n.dispatch("user/login",a).then((()=>{R({message:"登录成功",type:"success"}),s.$router.push({path:"/",query:o.otherQuery})})).catch((e=>{l.value=e.msg,s.sleepMixin(30).then((()=>{t.value=!1}))}))};return p("password"),p(null),(e,s)=>{const o=f("svg-icon"),r=f("el-input"),l=f("el-form-item"),n=f("el-button"),i=f("el-form");return g(),v("div",L,[M,b("div",Q,[y(' <img src="../../assets/login/login_left_img.png" /> '),b("div",q,[I,h(i,{model:_(a),"status-icon":"",rules:e.formRulesMixin,ref:(e,s)=>{s.loginFormRef=e},"label-width":"0px"},{default:w((()=>[h(l,{prop:"username",rules:e.formRulesMixin.isNotNull},{default:w((()=>[h(r,{modelValue:_(a).username,"onUpdate:modelValue":s[0]||(s[0]=e=>_(a).username=e),autocomplete:"off"},{prepend:w((()=>[h(o,{"icon-class":"user"})])),_:1},8,["modelValue"])])),_:1},8,["rules"]),h(l,{prop:"password",rules:e.formRulesMixin.minLength5},{default:w((()=>[h(r,{type:"password",modelValue:_(a).password,"onUpdate:modelValue":s[1]||(s[1]=e=>_(a).password=e),autocomplete:"off"},{prepend:w((()=>[h(o,{"icon-class":"password"})])),_:1},8,["modelValue"])])),_:1},8,["rules"]),h(l,null,{default:w((()=>[h(n,{loading:_(t),type:"primary",round:"",class:"login-btn",onClick:O(_(j),["prevent"])},{default:w((()=>[N])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"])])])])}}}))));var D,F=S(C,[["__scopeId","data-v-2529d779"]]);export{F as default};
