import{d as e,f as a,a as l,b as t,r as i,o,g as r,R as n,h as d,i as s,w as c,j as p,c as g,m,F as u,s as h,q as f}from"./vendor.40bf91cc.js";import{_ as b,e as x,b as C}from"./index.4ab7ab82.js";const v={class:"mr-3 rowSS"},w=h("错误日志测试"),y=h("删除"),M=h("查询"),k=h("删除"),D={class:"block columnCC mt-2 mb-5"},_={class:"detail-container rowBC elODialogModalBodyH60vh"},z={class:"detail-container-item"},T={class:"detail-container rowBC elODialogModalBodyH60vh"},U={key:0,class:"detail-container-item",style:{color:"green"}},V={key:1,class:"detail-container-item"},E={class:"detail-container rowBC elODialogModalBodyH60vh"},B={class:"detail-container-item"},L={class:"dialog-footer"},S=h("确 定");var Y=b(e({setup(e){let{proxy:h}=f(),b=()=>{throw new Error("产生的错误日志")},Y=a([]),P=l({errorLog:"",pageUrl:"",createTime:"",id:""}),j=()=>{const e=Object.assign(P,{pageNum:$,pageSize:H});Object.keys(e).forEach((a=>{""!==e[a]&&null!==e[a]&&void 0!==e[a]||delete e[a]}));let a={url:"/ty-user/errorCollection/selectPage",method:"get",data:e,isParams:!0,isAlertErrorMsg:!1};h.$axiosReq(a).then((e=>{var a,l;Y.value=null==(a=e.data)?void 0:a.records,h.pageTotalMixin=null==(l=e.data)?void 0:l.total}))},{pageNum:$,pageSize:H,handleCurrentChange:O,handleSizeChange:q}=x(j);const R=e=>{e&&2===e.length?(P.startTime=e[0],P.endTime=e[1]):(P.startTime="",P.endTime="")};t((()=>{j(),C.on("reloadErrorPage",(()=>{j()}))}));const A=()=>{$=1,j()};let F=a({}),I=async e=>{var a;await h.elConfirmMixin("确定",`您确定要删除【${e.pageUrl}】吗？`),(a=e.id,h.$axiosReq({url:"/ty-user/errorCollection/deleteById",data:{id:a},isParams:!0,method:"delete",bfLoading:!0})).then((()=>{j(),h.elMessageMixin(`【${e.pageUrl}】删除成功`)}))},N=a([]);const G=e=>{N.value=e},J=async()=>{let e=[],a="";if(e=N.value.map((e=>(a=a+e.pageUrl+",",e.id))),0===e.length)return void h.elMessageMixin("表格选项不能为空","warning");let l=a.length-1;await h.elConfirmMixin("删除",`您确定要删除【${a.slice(0,l)}】吗`);const t=e;h.$axiosReq({url:"/ty-user/errorCollection/deleteBatchIds",data:t,method:"DELETE",bfLoading:!0}).then((()=>{j(),h.elMessageMixin("删除成功")}))};return(e,a)=>{const l=i("el-button"),t=i("el-input"),h=i("el-form-item"),f=i("el-date-picker"),x=i("el-form"),C=i("el-table-column"),j=i("el-table"),N=i("el-pagination"),K=i("el-dialog");return o(),r(u,null,[n("操作"),d("div",v,[s(l,{type:"primary",onClick:p(b)},{default:c((()=>[w])),_:1},8,["onClick"]),s(l,{type:"primary",icon:"el-icon-delete",onClick:J},{default:c((()=>[y])),_:1}),n("条件搜索"),s(x,{ref:(e,a)=>{a.refsearchFormMixin=e},inline:!0,class:"demo-searchFormMixin ml-2"},{default:c((()=>[s(h,{"label-width":"0px",label:"",prop:"errorLog","label-position":"left"},{default:c((()=>[s(t,{modelValue:p(P).errorLog,"onUpdate:modelValue":a[0]||(a[0]=e=>p(P).errorLog=e),class:"widthPx-150",placeholder:"错误日志"},null,8,["modelValue"])])),_:1}),s(h,{"label-width":"0px",label:"",prop:"pageUrl","label-position":"left"},{default:c((()=>[s(t,{modelValue:p(P).pageUrl,"onUpdate:modelValue":a[1]||(a[1]=e=>p(P).pageUrl=e),class:"widthPx-150",placeholder:"页面路径"},null,8,["modelValue"])])),_:1}),s(h,{"label-width":"0px",label:"",prop:"createTime","label-position":"left"},{default:c((()=>[s(f,{modelValue:e.startEndArrMixin,"onUpdate:modelValue":a[2]||(a[2]=a=>e.startEndArrMixin=a),type:"datetimerange",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD HH:mm:ss",onChange:R,class:"widthPx-250","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])])),_:1}),n("查询按钮"),s(l,{onClick:A},{default:c((()=>[M])),_:1})])),_:1},512)]),n("表格和分页"),s(j,{id:"resetElementDialog",ref:(e,a)=>{a.refuserTable=e},size:"mini",border:"",onSelectionChange:G,data:p(Y)},{default:c((()=>[s(C,{type:"selection",align:"center",width:"50"}),s(C,{align:"center",prop:"errorLog",label:"错误日志","min-width":"300"}),s(C,{align:"center",prop:"pageUrl",label:"页面路径",width:"180"}),s(C,{align:"center",prop:"createTime",label:"创建时间",width:"140"}),n('    <el-table-column align="center" prop="id" label="id主键" min-width="100" />'),n("点击操作"),s(C,{fixed:"right",align:"center",label:"操作",width:"80"},{default:c((({row:e})=>[n('        <el-button type="text" size="small" @click="tableEditClick(row)">编辑</el-button>'),n('        <el-button type="text" size="small" @click="tableDetailClick(row)">详情</el-button>'),s(l,{type:"text",size:"small",onClick:a=>p(I)(e)},{default:c((()=>[k])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),n("分页"),d("div",D,[s(N,{"current-page":p($),"page-sizes":[10,20,50,100],"page-size":p(H),layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotalMixin,onSizeChange:p(q),onCurrentChange:p(O)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),n("详情"),e.detailDialogMixin?(o(),g(K,{key:0,title:e.dialogTitleMixin,modelValue:e.detailDialogMixin,"onUpdate:modelValue":a[4]||(a[4]=a=>e.detailDialogMixin=a),width:"40vw","close-on-click-modal":!1},{footer:c((()=>[d("span",L,[s(l,{type:"primary",onClick:a[3]||(a[3]=a=>e.detailDialogMixin=!1)},{default:c((()=>[S])),_:1})])])),default:c((()=>[d("div",_,[d("div",z,"DBC文件名："+m(p(F).username),1)]),d("div",T,[1===p(F).status?(o(),r("div",U,"状态： 启用")):(o(),r("div",V,"状态： 停用"))]),d("div",E,[d("div",B,"说明："+m(p(F).remark),1)])])),_:1},8,["title","modelValue"])):n("v-if",!0)],64)}}}),[["__scopeId","data-v-3cea67e6"]]);export{Y as default};
